<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/header') %>
        <title>
            <%= blog.title %>
        </title>
</head>

<body>
    <%- include('./partials/nav') %>

        <div class="container my-4 mx-auto w-75">
            <div class="container">
                <p class="h1 mb-4">
                    <%= blog.title %>
                </p>

                <div class="mb-4 pb-3 border-bottom">
                    <img src="<%= blog.createdBy.profileImageURL %>" alt="Profile Image" class="img-fluid" width="40px">
                    <span class="ps-2">
                        <%= blog.createdBy.fullName %>
                    </span>
                </div>

                <img src="<%= blog.coverImageURL %>" alt="Cover Image" class="img-fluid my-4" width="700px">
                <pre class="mt-4"><%= blog.body %></pre>
            </div>

            <div class="container mt-4">
                <p class="h4">Comments (<%= comments.length %>)</p>

                <% if (locals.user) { %>
                    <form action="/blog/comment/<%= blog._id %>" method="post">
                        <div class="my-3">
                            <input type="text" class="form-control" id="content" name="content"
                                placeholder="Comment here...">
                        </div>
                        <button type="submit" class="btn btn-sm btn-primary">Post</button>
                    </form>
                    <% } %>

                        <div class="mt-4">
                            <% comments.forEach((comment)=> { %>
                                <div class="mb-3 d-flex flex-row">
                                    <img src="<%= blog.createdBy.profileImageURL %>" alt="Profile Image"
                                        class="img-fluid" width="40px">
                                    <span class="ps-3">
                                        <p class="mb-0"><strong>
                                                <%= blog.createdBy.fullName %>
                                            </strong>
                                        </p>
                                        <p class="mb-0">
                                            <%= comment.content %>
                                        </p>
                                    </span>
                                </div>
                                <% }); %>
                        </div>
            </div>
        </div>


        <%- include('./partials/scripts') %>
</body>

</html>